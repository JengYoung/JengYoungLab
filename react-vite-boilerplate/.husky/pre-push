#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

#!/bin/sh
HEAD_BRANCH="$(git rev-parse --abbrev-ref HEAD)"

echo " ============================================================================ "
echo " ğŸŸ  NOW BRANCH IS ${HEAD_BRANCH}. CHECK PUSH POSSIBLE... ğŸ” ğŸŸ  "

FORBIDDEN_HTTPS_URL="https://github.com/JengYoung/JengyoungLab.git" # insert your remote url (https)
FORBIDDEN_SSH_URL="git@github.com:JengYoung/JengyoungLab.git" # insert your remote url (ssh)

# remained develop branch which could use later! ğŸ¥°
FORBIDDEN_REFS=("main" "develop") # insert branch ref

url=$2

if [ "${url}" != "${FORBIDDEN_HTTPS_URL}" -a "${url}" != "${FORBIDDEN_SSH_URL}" ]
then
    echo "ğŸ”´ ğŸš« YOUR URL: ${url}, FORBIDDEN URL: ${FORBIDDEN_HTTPS_URL}(https), ${FORBIDDEN_SSH_URL}(ssh) ğŸ”´"
    exit 1;
fi

refs_check=false
for ref in "${FORBIDDEN_REFS[@]}"
do
    if [ "${HEAD_BRANCH}" == "${ref}" ]
    then
        refs_check=true
    fi
done

if [ "${refs_check}" == "true" ]
then
    echo " ğŸ”´ ğŸš« DO NOT PUSH FORBIDDEN BRANCH '${url}' DIRECTLY! ğŸ”´"
    exit 1 # ê¸ˆì§€ëœ ref ë¡œ push ë¥¼ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬
else
    echo " ğŸŸ¢ PUSH COMMIT TO $1/${HEAD_BRANCH}!ğŸ‘ ğŸŸ¢ "
    exit 0
fi

exit 0
